@inject NavigationManager navigationManager;
@inject AuthenticationStateProvider authenticationStateProvider

@inherits LayoutComponentBase

<MudThemeProvider Theme="@LightTheme.GetTheme()"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<PageTitle>ASBNApp</PageTitle>


<MudLayout>
    <NavBar />
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>



@code{
    private bool _conditionChecked;

    /// <summary>
    /// Redirect the user to the login page if he's not logged in.
    /// </summary>
    protected override async void OnInitialized()
    {
        var authState = await authenticationStateProvider.GetAuthenticationStateAsync();
        _conditionChecked = true;

        if(!authState.User.Identity.IsAuthenticated)
        {
            navigationManager.NavigateTo("/");
        }
    }
}