@inject NavigationManager navigationManager;
@inject AuthenticationStateProvider authenticationStateProvider

@inherits LayoutComponentBase

<MudThemeProvider Theme="@LightTheme.GetTheme()"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<PageTitle>ASBNApp</PageTitle>

<MudLayout>
    <NavBar />
    <MudMainContent>
        @Body
    </MudMainContent> 
</MudLayout>

@code{
    /// <summary>
    /// If the user isn't logged in, return to the index page.
    /// </summary>
    protected override async Task OnInitializedAsync()
    {
        var authState = await authenticationStateProvider.GetAuthenticationStateAsync();
        
        if(!authState.User.Identity.IsAuthenticated)
        {
            navigationManager.NavigateTo("/");
        }
    }
}