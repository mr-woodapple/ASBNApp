@page "/register"
@layout IndexLayout


<MudContainer Class="mt-5">

	<MudPaper Outlined Class="pa-10">
		@if(_isRegistered)
		{
			
		}
		else
		{
			<MudText Typo="Typo.h3" Class="mb-5">Create your account!</MudText>
			<MudText Typo="Typo.subtitle1">Get started by creating your account now.</MudText>

			<MudItem Class="my-10">
				<MudTextField @bind-Value="_emailValue" Label="E-Mail *" Variant="Variant.Text" InputType="InputType.Email" />
				<MudTextField @bind-Value="_passwordValue" Label="Password *" Variant="Variant.Text" InputType="_passwordInputType"
							  Adornment="Adornment.End" AdornmentIcon="@_passwordInputIcon" OnAdornmentClick="TogglePasswordInputMode" AdornmentAriaLabel="Show Password" />
				<MudTextField @bind-Value="_passwordRepeatedValue" Label="Repeat Password *" Variant="Variant.Text" InputType="_passwordInputType"
							  Adornment="Adornment.End" AdornmentIcon="@_passwordInputIcon" OnAdornmentClick="TogglePasswordInputMode" AdornmentAriaLabel="Show Password" />
			</MudItem>

			<MudButton Disabled="@_isRegistering" Variant="Variant.Filled" Color="Color.Primary" FullWidth="true" Class="mt-5" OnClick="HandleRegistering">
				@if (_isRegistering)
				{
					<MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
					<MudText Class="ms-2">Creating your account...</MudText>
				}
				else
				{
					<MudText>Create account</MudText>
				}
			</MudButton>

			<MudItem Class="mt-5">
				<MudText>
					Already have an account?
					<MudLink Href="/login" Underline="Underline.Always">Sign in here!</MudLink>
				</MudText>
			</MudItem>
		}
		

	</MudPaper>
</MudContainer>


@code {
	private bool _isRegistered;
	private bool _isRegistering;
	private string _emailValue { get; set; }
	private string _passwordValue { get; set; }
	private string _passwordRepeatedValue { get; set; }

	// Variables for the password input
	private bool _isVisible;
	private InputType _passwordInputType = InputType.Password;
	private string _passwordInputIcon = Icons.Material.Filled.VisibilityOff;

	/// <summary>
	/// Toggle the password input between hidden and visibile
	/// </summary>
	private void TogglePasswordInputMode()
	{
		if (_isVisible)
		{
			_isVisible = false;
			_passwordInputIcon = Icons.Material.Filled.VisibilityOff;
			_passwordInputType = InputType.Password;
		}
		else
		{
			_isVisible = true;
			_passwordInputIcon = Icons.Material.Filled.Visibility;
			_passwordInputType = InputType.Text;
		}
	}

	private async Task HandleRegistering()
	{
		// Check if both password are identical & if we have a valid E-Mail
		return;
	}
}
